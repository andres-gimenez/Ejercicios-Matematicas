%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\documentName} { Examen 2ª evaluación }
\newcommand{\documentContent} { Examen conocimientos } 
\newcommand{\waterMark} { Modelo B } 
%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Configuración del documento.
\input{./include/configurationCurso} 
\input{./include/configuration} 

%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Exam configuration
%\pointsdroppedatright   %% No mostrar la puntuación
\pointsinrightmargin % Para poner las puntuaciones a la derecha. Se puede cambiar. Si se comenta, sale a la izquierda.
\extrawidth{-1.5cm} %Un poquito más de margen por si ponemos textos largos.
\marginpointname{ \emph{\points}}

%% Si se comenta no aparecerán los espacios de la solución.
%\nocancelspace

%% Esto es de la clase exam. Si dejamos sin comentar \printanswers, se mostraran las soluciones. 
%% Si la comentamos y dejamos sin comentar \noprintanswers, pues no se muestran las soluciones.
\printanswers
%\noprintanswers

%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\StudentData
\GradeTableHeader

\justifying

\begin{questions}
    \setcounter{question}{0}

    \question[6]
    Indica la respuesta más adecuada.
    \begin{center}
        \fbox{\fbox{\parbox{6.5in}{
                    La forma de valor el resultado las preguntas tipo test será:

                    \begin{equation*} \label{eqn}
                        \text{Nota} = \left( \text{correctas} - \frac{\text{incorrecta}}{2} \right) \cdot \left( \frac{\text{nota máxima}}{\text{preguntas}}  \right)
                    \end{equation*}

                    \vspace{0.2cm}
                    \par
                    Cuando contestes a cada pregunta del cuestionario ten presente:
                    \begin{itemize}
                        \item Lee atentamente las preguntas y las contestaciones, tienes tiempo de sobra para resolver el examen.
                        \item Los fallos restan puntos, si no estás seguro de la respuesta no la contestes.
                        \item Aunque en algunas preguntas pueda parecer que existe más de una respuesta correcta, tienes que dar una respuesta profesional que indique que dominas los conceptos teóricos.
                    \end{itemize}
                }}}
    \end{center}

    \begin{parts}

       

        \PartNoBreak{
            Alguna de las capas entro del modelo OSI son \dots
            \newline
            \begin{oneparcheckboxes}
                \CorrectChoice
                \dots aplicación, transporte, red y física.
                \newline
                \choice
                \dots aplicación, serialización, red y física.
                \newline
                \choice
                \dots programación, serialización y transporte.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            El protocolo TCP/IP, costa a su vez de una serie de protocolos, tomando su nombre de los más utilizados que son el TCP y el IP\dots
            \newline
            \begin{oneparcheckboxes}
                \choice
                \dots siendo el protocolo TCP el encargado de llevar los paquetes a su destino.
                \newline
                \CorrectChoice
                \dots siendo el protocolo IP el encargado de llevar los paquetes a su destino.
                \newline
                \choice
                \dots los cuales no se pueden usar simultáneamente.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            Al comunicar dos procesos en distintas máquinas con protocolo TCP/IP, \dots
            \newline
            \begin{oneparcheckboxes}
                \choice
                \dots tanto la dirección IP como el puerto identifica el proceso dentro del host de destino.
                \newline
                \CorrectChoice
                \dots la dirección IP identifica el host destino, mientras que el puerto identifica el proceso dentro del host de destino.
                \newline
                \choice
                \dots tanto la dirección IP como el puerto identifica host de destino.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            Los protocolos más utilizados dentro de la capa de transporte son TCP y UDP \dots
            \newline
            \begin{oneparcheckboxes}
                \CorrectChoice
                \dots TCP garantiza que los mensajes lleguen siempre y UDP no.
                \newline
                \choice
                \dots el TCP se utiliza en el emisor y el UDP en el receptor.
                \newline
                \choice
                \dots UDP garantiza que los mensajes lleguen siempre y TCP no.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            Dentro de la clasificación de tipos de objetos, en programación\dots
            \newline
            \begin{oneparcheckboxes}
                \choice
                \dots Los POCO y value object son un tipo particular de DTO.
                \newline
                \CorrectChoice
                \dots Los DTO y los value object son un tipo particular de POCO.
                \newline
                \choice
                \dots Los value object y los DTO son los mismo.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            Los DTO o Data Transfer Object\dots
            \newline
            \begin{oneparcheckboxes}
                \choice
                \dots se utilizan para transferir datos entre diferentes aplicaciones o diferentes capas dentro de una sola aplicación y suelen contener lógica.
                \newline
                \CorrectChoice
                \dots se utilizan para transferir datos entre diferentes aplicaciones o diferentes capas dentro de una sola aplicación y no deben contener lógica.
                \newline
                \choice
                \dots no se suelen utilizar, porque los frameworks de programación nos abstraen de su uso.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            Los POCOs y los POJOs\dots
            \newline
            \begin{oneparcheckboxes}
                \choice
                \dots son conceptos de programación orientada a objetos que definen como estructurar un código. Los POJOs son un caso particular de los POCOs.
                \newline
                \choice
                \dots son conceptos de programación, referentes a como se comunican dos programas vías TCP/IP.
                \newline
                \CorrectChoice
                \dots se refieren al mismo concepto dentro de la programación orientada a objetos 
                y su única referencia es que hacen referencia al lenguaje de programación con los que están construidos.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            Podemos definir la serialización \dots
            \newline
            \begin{oneparcheckboxes}
                \choice
                \dots un mecanismo que nos permite generar un archivo en formato json.
                \newline
                \CorrectChoice
                \dots como la obtención de una trama de bytes que represente el estado de un objeto, desde la cual podemos reconstruir total o parcialmente el objeto.
                \newline
                \choice
                \dots un mecanismo que nos permite enviar información en serie.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            Si queremos aumentar la seguridad de un sistema criptográfico deberemos \dots
            \newline
            \begin{oneparcheckboxes}
                \choice
                \dots aumentar el número de veces que cifrados la información.
                \newline
                \choice
                \dots aumentando la clave y aumentando el número de veces que se cifra la información.
                \newline
                \CorrectChoice
                \dots aumentar el tamaño de la clave.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            Alguno de los algoritmos para generar el código HASH son \dots
            \newline
            \begin{oneparcheckboxes}
                \choice
                \dots C-3PO y RD-2D.
                \newline
                \CorrectChoice
                \dots MD5, SHA1 y SHA256.
                \newline
                \choice
                \dots KLA256 y KLA1024.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            una comunicación se considera unicast \dots
            \newline
            \begin{oneparcheckboxes}
                \choice
                \dots cuando solo se envía un paquete.
                \newline
                \choice
                \dots cuando solo se envía la información una sola vez y
                en las comunicaciones multicast se envían cada paquete repetidamente hasta que el receptor confirma la recepción del envío.
                \newline
                \CorrectChoice
                \dots cuando solo hay un destinatario.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            Los procedimientos que ha de seguir un usuario para acceder a un servicio se denominan\dots
            \newline
            \begin{oneparcheckboxes}
                \choice
                \dots pantalla del servicio.
                \newline
                \CorrectChoice
                \dots interfaz del servicio.
                \newline
                \choice
                \dots dominio del servicio.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            Algunos comandos de Windows para obtener información del estado de una red TCP/IP son\dots
            \newline
            \begin{oneparcheckboxes}
                \CorrectChoice
                \dots ipconfig, ping, tracert.
                \newline
                \choice
                \dots ipsend, socket, openip.
                \newline
                \choice
                \dots socket, ping, ipcommand.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            En un protocolo con estado \dots
            \newline
            \begin{oneparcheckboxes}
                \choice
                \dots la estructura de los objetos enviados al servidor, son serializados por algún lenguaje de marcas como XML o JSON entre otros.
                \newline
                \CorrectChoice
                \dots la secuencia en la que se envían los mensajes afecta al resultado final de la petición, 
                frente a un protocolo sin estado que siempre devolverá el mismo resultado ante el mismo mensaje, independientemente del orden.
                \newline
                \choice
                \dots la comunicación es bidireccional, enviando un objeto desde el cliente al servidor y devolviendo otro tipo de objeto distinto del servidor al cliente.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            Los protocolos utilizados para el envío y recepción de correo electrónico son \dots
            \newline
            \begin{oneparcheckboxes}
                \CorrectChoice
                \dots pop3, imap y smtp.
                \newline
                \choice
                \dots pop3, imap y ftp.
                \newline
                \choice
                \dots ssh, imap y smtp.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            El protocolo DNS nos permite \dots
            \newline
            \begin{oneparcheckboxes}
                \choice
                \dots comunicación cliente servidor de forma cifrada.
                \newline
                \CorrectChoice
                \dots resolver los nombres de dominio, obteniendo las direcciones IP asociada a dicho dominio.
                \newline
                \choice
                \dots comunicar dos sockets de forma asíncrona.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            El protocolo http es \dots
            \newline
            \begin{oneparcheckboxes}
                \choice
                \dots un protocolo dinámico y absoluto.
                \newline
                \CorrectChoice
                \dots un protocolo sin estado.
                \newline
                \choice
                \dots un protocolo diseñado para crear aplicaciones a través de un navegador.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            Alguna de las peticiones más utilizadas en el protocolo HTTP son \dots
            \newline
            \begin{oneparcheckboxes}
                \choice
                \dots GET y SET.
                \newline
                \CorrectChoice
                \dots GET, POST y PUT.
                \newline
                \choice
                \dots GET, LOAD y DOWNLOAD.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            Si una llamada a un servidor nos devuelve un código 200 podemos interpretar que \dots
            \newline
            \begin{oneparcheckboxes}
                \choice
                \dots que se ha producido un error de ejecución, por ejemplo, un problema de conexión con la base de datos.
                \newline
                \CorrectChoice
                \dots la llamada se a realizado correctamente.
                \newline
                \choice
                \dots que el servidor no contiene la página solicitada.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            Si una llamada a un servidor nos devuelve un código 500 podemos interpretar que \dots
            \newline
            \begin{oneparcheckboxes}
                \CorrectChoice
                \dots que se ha producido un error de ejecución, por ejemplo, un problema de conexión con la base de datos.
                \newline
                \choice
                \dots la llamada se a realizado correctamente.
                \newline
                \choice
                \dots que el servidor no contiene la página solicitada.
                \newline
            \end{oneparcheckboxes}
        }

        \PartNoBreak{
            Un navegador o browser interpreta el tipo de fichero que se descarga atendiendo a \dots
            \newline
            \begin{oneparcheckboxes}
                \choice
                \dots por la extensión del nombre del fichero, por ejemplo, un fichero cuyo nombre termina en .gif lo interpretará como una imagen.
                \newline
                \CorrectChoice
                \dots el tipo MIME proporcionado por el servidor a través del campo content-type.
                \newline
                \choice
                \dots por la información que contiene el fichero, el navegador primero analiza su contenido antes de interpretar su contenido.
                \newline
            \end{oneparcheckboxes}
        }

    \end{parts}

    \newpage
    \question[4]
    En los anexos I y II se muestran dos fragmentos de código en el que se establece una conexión vía Socket.
    Explica conceptualmente que es lo que hace el código. 
    \\ \\
    \footnotesize{(*) Se valorará en función de la demostración de los conocimientos del funcionamiento de un socket. }
    \\ 

    \phantom{new page}
    \newpage

    \phantom{new page}

    \newpage
    \phantom{new page}

    \newpage
    \phantom{new page}

    \newpage
    \phantom{new page}
\end{questions}


\center{\textbf{\large{Anexo I}}}
\vspace{0.1cm}

    \begin{lstlisting}[language={[Sharp]C}]
IPHostEntry host = Dns.GetHostEntry("localhost");
IPAddress ipAddress = host.AddressList[0];
IPEndPoint localEndPoint = new IPEndPoint(ipAddress, 11000);

try
{
    Socket listener = new Socket(ipAddress.AddressFamily, 
                                SocketType.Stream, ProtocolType.Tcp);

    listener.Bind(localEndPoint);
    listener.Listen(10);

    while (true)
    {
        Socket handler = listener.Accept();
        var cacheRec = new byte[4096];
        int bytesRec = handler.Receive(cacheRec);

        if (bytesRec > 0)
        {
            var jsonParametro = Encoding.UTF8.
                GetString(cacheRec, 0, bytesRec);
            var parametro = JsonSerializer.
                Deserialize<CalculadoraParametro>(jsonParametro);

            var resultado = Calculadora(parametro);

            var jsonResultado = JsonSerializer.
                Serialize<CalculadoraResultado>(resultado);

            var cacheEnvio = Encoding.UTF8.GetBytes(jsonResultado);
            handler.Send(cacheEnvio);
            Thread.Sleep(0);
        }

        handler.Shutdown(SocketShutdown.Both);
        handler.Close();
    }
}
catch (Exception e)
{
    Console.WriteLine(e.ToString());
}
\end{lstlisting}

\newpage

\center{\textbf{\large{Anexo II}}}
\vspace{0.1cm}

    \begin{lstlisting}[language={[Sharp]C}]
try
{
    IPHostEntry host = Dns.GetHostEntry("localhost");
    IPAddress ipAddress = host.AddressList[0];
    IPEndPoint remoteEP = new IPEndPoint(ipAddress, 11000);

    Socket sender = new Socket(ipAddress.AddressFamily,
        SocketType.Stream, ProtocolType.Tcp);

    sender.Connect(remoteEP);

    var jsonParametro = JsonSerializer.
        Serialize<CalculadoraParametro>(parametro);

    var cacheEnvio = Encoding.UTF8.GetBytes(jsonParametro);

    int bytesSend = sender.Send(cacheEnvio);

    byte[] bufferRec = new byte[1024];
    int bytesRec1 = sender.Receive(bufferRec);

    var jsonResultado = Encoding.UTF8.
        GetString(bufferRec, 0, bytesRec1);

    var resultado = JsonSerializer.
        Deserialize<CalculadoraResultado>(jsonResultado);

    sender.Shutdown(SocketShutdown.Both);
    sender.Close();

    return resultado;
}
catch (ArgumentNullException ane)
{
    Console.WriteLine("ArgumentNullException : {0}", ane.ToString());
}
catch (SocketException se)
{
    Console.WriteLine("SocketException : {0}", se.ToString());
}
catch (Exception e)
{
    Console.WriteLine("Unexpected exception : {0}", e.ToString());
}
\end{lstlisting}
  

\end{document}